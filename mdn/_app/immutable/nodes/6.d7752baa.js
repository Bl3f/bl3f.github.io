import{S as le,i as ae,s as re,N as oe,b as H,l as k,O as se,y,A as T,f as m,t as S,e as v,j as L,d as w,g as E,k as I,m as g,n as O,z as R,P as W,Q as z,B as q,F as M,a as A,G as P,c as j,v as G,H as B,w as ne,I as C}from"../chunks/index.30eb3621.js";import"../chunks/VennDiagram.svelte_svelte_type_style_lang.57471357.js";import"../chunks/index.5b74963f.js";import"../chunks/paths.aac5aa61.js";import{I as U,D as ce,T as ie,A as fe,a as ue,b as _e,_ as he}from"../chunks/Icon.88caa09a.js";function Y(h,e,l){const t=h.slice();return t[8]=e[l][0],t[9]=e[l][1],t}function J(h,e,l){const t=h.slice();return t[12]=e[l][0],t[13]=e[l][1],t}function K(h,e,l){const t=h.slice();return t[16]=e[l],t}function me(h){let e,l,t=h[19].message+"",a;return{c(){e=S(`An error was encountered while loading project schema.

	`),l=v("pre"),a=S(t),this.h()},l(c){e=L(c,`An error was encountered while loading project schema.

	`),l=w(c,"PRE",{class:!0});var _=E(l);a=L(_,t),_.forEach(m),this.h()},h(){I(l,"class","px-4 py-2 bg-red-800 text-white")},m(c,_){k(c,e,_),k(c,l,_),g(l,a)},p:O,i:O,o:O,d(c){c&&m(e),c&&m(l)}}}function pe(h){let e,l,t,a=[],c=new Map,_,s=Object.entries(h[7]);const n=r=>r[8];for(let r=0;r<s.length;r+=1){let o=Y(h,s,r),p=n(o);c.set(p,a[r]=te(p,o))}return{c(){e=v("section"),l=v("div"),t=v("ul");for(let r=0;r<a.length;r+=1)a[r].c();this.h()},l(r){e=w(r,"SECTION",{});var o=E(e);l=w(o,"DIV",{});var p=E(l);t=w(p,"UL",{class:!0});var f=E(t);for(let b=0;b<a.length;b+=1)a[b].l(f);f.forEach(m),p.forEach(m),o.forEach(m),this.h()},h(){I(t,"class","list-none m-0 p-0 flex flex-col gap-1 mb-1")},m(r,o){k(r,e,o),g(e,l),g(l,t);for(let p=0;p<a.length;p+=1)a[p].m(t,null);_=!0},p(r,o){o&7&&(s=Object.entries(r[7]),R(),a=W(a,o,n,1,r,s,c,t,z,te,null,Y),q())},i(r){if(!_){for(let o=0;o<s.length;o+=1)y(a[o]);_=!0}},o(r){for(let o=0;o<a.length;o+=1)T(a[o]);_=!1},d(r){r&&m(e);for(let o=0;o<a.length;o+=1)a[o].d()}}}function X(h){let e,l=[],t=new Map,a,c,_=Object.entries(h[9]);const s=n=>n[12];for(let n=0;n<_.length;n+=1){let r=J(h,_,n),o=s(r);t.set(o,l[n]=ee(o,r))}return{c(){e=v("ul");for(let n=0;n<l.length;n+=1)l[n].c();a=A(),this.h()},l(n){e=w(n,"UL",{class:!0});var r=E(e);for(let o=0;o<l.length;o+=1)l[o].l(r);a=j(r),r.forEach(m),this.h()},h(){I(e,"class","list-none m-0 flex flex-col gap-1")},m(n,r){k(n,e,r);for(let o=0;o<l.length;o+=1)l[o].m(e,null);g(e,a),c=!0},p(n,r){r&5&&(_=Object.entries(n[9]),R(),l=W(l,r,s,1,n,_,t,e,z,ee,a,J),q())},i(n){if(!c){for(let r=0;r<_.length;r+=1)y(l[r]);c=!0}},o(n){for(let r=0;r<l.length;r+=1)T(l[r]);c=!1},d(n){n&&m(e);for(let r=0;r<l.length;r+=1)l[r].d()}}}function Z(h){let e,l=[],t=new Map,a,c=h[13].columns;const _=s=>s[16].column_name;for(let s=0;s<c.length;s+=1){let n=K(h,c,s),r=_(n);t.set(r,l[s]=x(r,n))}return{c(){e=v("ul");for(let s=0;s<l.length;s+=1)l[s].c();this.h()},l(s){e=w(s,"UL",{class:!0});var n=E(e);for(let r=0;r<l.length;r+=1)l[r].l(n);n.forEach(m),this.h()},h(){I(e,"class","list-none m-0 flex flex-col gap-1")},m(s,n){k(s,e,n);for(let r=0;r<l.length;r+=1)l[r].m(e,null);a=!0},p(s,n){n&4&&(c=s[13].columns,R(),l=W(l,n,_,1,s,c,t,e,z,x,null,K),q())},i(s){if(!a){for(let n=0;n<c.length;n+=1)y(l[n]);a=!0}},o(s){for(let n=0;n<l.length;n+=1)T(l[n]);a=!1},d(s){s&&m(e);for(let n=0;n<l.length;n+=1)l[n].d()}}}function de(h){let e,l;return e=new U({props:{src:fe,class:"text-gray-700 w-5 h-5"}}),{c(){M(e.$$.fragment)},l(t){P(e.$$.fragment,t)},m(t,a){B(e,t,a),l=!0},p:O,i(t){l||(y(e.$$.fragment,t),l=!0)},o(t){T(e.$$.fragment,t),l=!1},d(t){C(e,t)}}}function be(h){let e,l;return e=new U({props:{src:ue,class:"text-gray-700 w-5 h-5"}}),{c(){M(e.$$.fragment)},l(t){P(e.$$.fragment,t)},m(t,a){B(e,t,a),l=!0},p:O,i(t){l||(y(e.$$.fragment,t),l=!0)},o(t){T(e.$$.fragment,t),l=!1},d(t){C(e,t)}}}function ge(h){let e,l;return e=new U({props:{src:_e,class:"text-gray-700 w-5 h-5"}}),{c(){M(e.$$.fragment)},l(t){P(e.$$.fragment,t)},m(t,a){B(e,t,a),l=!0},p:O,i(t){l||(y(e.$$.fragment,t),l=!0)},o(t){T(e.$$.fragment,t),l=!1},d(t){C(e,t)}}}function ke(h){let e,l;return e=new U({props:{src:he,class:"text-gray-700 w-5 h-5"}}),{c(){M(e.$$.fragment)},l(t){P(e.$$.fragment,t)},m(t,a){B(e,t,a),l=!0},p:O,i(t){l||(y(e.$$.fragment,t),l=!0)},o(t){T(e.$$.fragment,t),l=!1},d(t){C(e,t)}}}function x(h,e){let l,t,a,c,_,s,n,r=e[16].column_name+"",o,p,f=e[16].data_type+"",b,i;const u=[ke,ge,be,de],d=[];function N($,D){return $[16].data_type==="INT"||$[16].data_type==="BIGINT"||$[16].data_type==="SMALLINT"||$[16].data_type==="TINYINT"||$[16].data_type==="DOUBLE"?0:$[16].data_type==="DATE"||$[16].data_type==="DATETIME"||$[16].data_type==="TIMESTAMP"?1:$[16].data_type==="BOOLEAN"?2:3}return a=N(e),c=d[a]=u[a](e),{key:h,first:null,c(){l=v("li"),t=v("div"),c.c(),_=A(),s=v("div"),n=v("b"),o=S(r),p=S("  "),b=S(f),this.h()},l($){l=w($,"LI",{class:!0});var D=E(l);t=w(D,"DIV",{class:!0});var F=E(t);c.l(F),_=j(F),s=w(F,"DIV",{class:!0});var V=E(s);n=w(V,"B",{});var Q=E(n);o=L(Q,r),Q.forEach(m),p=L(V,"  "),b=L(V,f),V.forEach(m),F.forEach(m),D.forEach(m),this.h()},h(){I(s,"class","pl-2 lowercase"),I(t,"class","flex px-2 py-1 rounded w-full hover:bg-blue-50"),I(l,"class","font-mono text-sm ml-6 rounded flex flex-row"),this.first=l},m($,D){k($,l,D),g(l,t),d[a].m(t,null),g(t,_),g(t,s),g(s,n),g(n,o),g(s,p),g(s,b),i=!0},p($,D){e=$,c.p(e,D)},i($){i||(y(c),i=!0)},o($){T(c),i=!1},d($){$&&m(l),d[a].d()}}}function ee(h,e){let l,t,a,c,_=e[12]+"",s,n,r,o,p,f;a=new U({props:{src:ie,class:"text-gray-700 w-5 h-5 mr-1"}});function b(){return e[5](e[13])}let i=e[0]===e[13]&&Z(e);return{key:h,first:null,c(){l=v("li"),t=v("button"),M(a.$$.fragment),c=A(),s=S(_),n=A(),i&&i.c(),r=H(),this.h()},l(u){l=w(u,"LI",{class:!0});var d=E(l);t=w(d,"BUTTON",{class:!0});var N=E(t);P(a.$$.fragment,N),c=j(N),s=L(N,_),N.forEach(m),d.forEach(m),n=j(u),i&&i.l(u),r=H(),this.h()},h(){I(t,"class","bg-gray-200 px-2 py-1 rounded flex w-full hover:bg-blue-200"),G(t,"bg-blue-200",e[0]===e[13]),I(l,"class","font-mono m-0 text-sm font-bold ml-3"),this.first=l},m(u,d){k(u,l,d),g(l,t),B(a,t,null),g(t,c),g(t,s),k(u,n,d),i&&i.m(u,d),k(u,r,d),o=!0,p||(f=ne(t,"click",b),p=!0)},p(u,d){e=u,(!o||d&5)&&G(t,"bg-blue-200",e[0]===e[13]),e[0]===e[13]?i?(i.p(e,d),d&1&&y(i,1)):(i=Z(e),i.c(),y(i,1),i.m(r.parentNode,r)):i&&(R(),T(i,1,1,()=>{i=null}),q())},i(u){o||(y(a.$$.fragment,u),y(i),o=!0)},o(u){T(a.$$.fragment,u),T(i),o=!1},d(u){u&&m(l),C(a),u&&m(n),i&&i.d(u),u&&m(r),p=!1,f()}}}function te(h,e){let l,t,a,c,_=e[8]+"",s,n,r,o,p,f;a=new U({props:{src:ce,class:"text-white w-5 h-5 mr-1"}});function b(){return e[4](e[8])}let i=e[1]===e[8]&&X(e);return{key:h,first:null,c(){l=v("li"),t=v("button"),M(a.$$.fragment),c=A(),s=S(_),n=A(),i&&i.c(),r=H(),this.h()},l(u){l=w(u,"LI",{class:!0});var d=E(l);t=w(d,"BUTTON",{class:!0});var N=E(t);P(a.$$.fragment,N),c=j(N),s=L(N,_),N.forEach(m),d.forEach(m),n=j(u),i&&i.l(u),r=H(),this.h()},h(){I(t,"class","bg-gray-500 px-2 py-1 rounded font-bold flex w-full hover:bg-blue-500"),G(t,"bg-blue-500",e[1]===e[8]),I(l,"class","font-mono m-0 text-sm text-white"),this.first=l},m(u,d){k(u,l,d),g(l,t),B(a,t,null),g(t,c),g(t,s),k(u,n,d),i&&i.m(u,d),k(u,r,d),o=!0,p||(f=ne(t,"click",b),p=!0)},p(u,d){e=u,(!o||d&6)&&G(t,"bg-blue-500",e[1]===e[8]),e[1]===e[8]?i?(i.p(e,d),d&2&&y(i,1)):(i=X(e),i.c(),y(i,1),i.m(r.parentNode,r)):i&&(R(),T(i,1,1,()=>{i=null}),q())},i(u){o||(y(a.$$.fragment,u),y(i),o=!0)},o(u){T(a.$$.fragment,u),T(i),o=!1},d(u){u&&m(l),C(a),u&&m(n),i&&i.d(u),u&&m(r),p=!1,f()}}}function $e(h){let e;return{c(){e=S("Loading Schema Information...")},l(l){e=L(l,"Loading Schema Information...")},m(l,t){k(l,e,t)},p:O,i:O,o:O,d(l){l&&m(e)}}}function ye(h){let e,l,t={ctx:h,current:null,token:null,hasCatch:!0,pending:$e,then:pe,catch:me,value:7,error:19,blocks:[,,,]};return oe(h[2](),t),{c(){e=H(),t.block.c()},l(a){e=H(),t.block.l(a)},m(a,c){k(a,e,c),t.block.m(a,t.anchor=c),t.mount=()=>e.parentNode,t.anchor=e,l=!0},p(a,[c]){h=a,se(t,h,c)},i(a){l||(y(t.block),l=!0)},o(a){for(let c=0;c<3;c+=1){const _=t.blocks[c];T(_)}l=!1},d(a){a&&m(e),t.block.d(a),t.token=null,t=null}}}function ve(h,e,l){let{data:t}=e,{__db:a}=t;async function c(){const o=await a.query("SELECT * FROM information_schema.tables WHERE table_catalog = 'memory' AND table_name != 'stats'"),p={};return await Promise.all(o.map(async f=>{const b=await a.query(`SELECT * FROM information_schema.columns WHERE table_name = '${f.table_name}' AND table_schema = '${f.table_schema}'`);p[f.table_schema]||(p[f.table_schema]={}),p[f.table_schema][f.table_name]={table:f,columns:b}})),p}let _="",s="";const n=o=>{l(1,s=s===o?"":o),l(0,_="")},r=o=>{l(0,_=_===o?"":o)};return h.$$set=o=>{"data"in o&&l(3,t=o.data)},[_,s,c,t,n,r]}class we extends le{constructor(e){super(),ae(this,e,ve,ye,re,{data:3})}}function Ee(h){let e,l,t,a,c,_,s,n,r,o,p;return o=new we({props:{data:h[0]}}),{c(){e=v("h1"),l=S("Project Schema"),t=A(),a=v("p"),c=S("This page details the tables and columns that are currently loaded in your project."),_=A(),s=v("h2"),n=S("Sources"),r=A(),M(o.$$.fragment),this.h()},l(f){e=w(f,"H1",{class:!0});var b=E(e);l=L(b,"Project Schema"),b.forEach(m),t=j(f),a=w(f,"P",{class:!0});var i=E(a);c=L(i,"This page details the tables and columns that are currently loaded in your project."),i.forEach(m),_=j(f),s=w(f,"H2",{class:!0});var u=E(s);n=L(u,"Sources"),u.forEach(m),r=j(f),P(o.$$.fragment,f),this.h()},h(){I(e,"class","markdown"),I(a,"class","markdown"),I(s,"class","markdown")},m(f,b){k(f,e,b),g(e,l),k(f,t,b),k(f,a,b),g(a,c),k(f,_,b),k(f,s,b),g(s,n),k(f,r,b),B(o,f,b),p=!0},p(f,[b]){const i={};b&1&&(i.data=f[0]),o.$set(i)},i(f){p||(y(o.$$.fragment,f),p=!0)},o(f){T(o.$$.fragment,f),p=!1},d(f){f&&m(e),f&&m(t),f&&m(a),f&&m(_),f&&m(s),f&&m(r),C(o,f)}}}function Te(h,e,l){let{data:t}=e;return h.$$set=a=>{"data"in a&&l(0,t=a.data)},[t]}class Ae extends le{constructor(e){super(),ae(this,e,Te,Ee,re,{data:0})}}export{Ae as component};
